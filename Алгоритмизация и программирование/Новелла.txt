using System;

public class Program
{
    public static void Main()
    {
        bool restart = true;
        while (restart)
        {
            // Начинаем новую игру
            Console.Clear();
            Console.WriteLine("Добро пожаловать в расширенное приключение подземелья!");

            Console.WriteLine("Вы — отважный герой, стоящий перед входом в мрачное подземелье.");
            Console.WriteLine("Что вы хотите сделать?");
            Console.WriteLine("1 - Войти в подземелье");
            Console.WriteLine("2 - Выйти из игры");
            Console.Write("Введите ваш выбор (1 или 2): ");
            string choice = Console.ReadLine();

            if (choice == "1")
            {
                // Начинаем приключение
                Console.WriteLine("Вы вошли в тёмное подземелье. Перед вами два пути:");
                Console.WriteLine("1 - Правый коридор");
                Console.WriteLine("2 - Левый коридор");
                Console.Write("Выберите путь (1 или 2): ");
                string path = Console.ReadLine();

                if (path == "1")
                {
                    // Правый коридор
                    Console.WriteLine("Вы пошли по правому коридору и нашли лагерь монстров.");
                    Console.WriteLine("Что делать?");
                    Console.WriteLine("1 - Вступить в бой");
                    Console.WriteLine("2 - Попытаться пройти мимо тихо");
                    Console.Write("Ваш выбор (1 или 2): ");
                    string action = Console.ReadLine();

                    if (action == "1")
                    {
                        // Бой с монстрами
                        Console.WriteLine("Вы напали на монстров и начали битву!");
                        Console.WriteLine("Битва сложная, но вы одержали победу!");
                        Console.WriteLine("Вы нашли сокровища — решение зависит от вашей хитрости:");
                        Console.WriteLine("1 - Забрать всю добычу");
                        Console.WriteLine("2 - Оставить часть монстрам");
                        string lootChoice = Console.ReadLine();

                        if (lootChoice == "1")
                        {
                            Console.WriteLine("Вы богаче на всю добычу! Но вдруг вас заметили стражники...");
                            Console.WriteLine("Конец 1: Вы были пойманы и отправлены в темницу.");
                        }
                        else if (lootChoice == "2")
                        {
                            Console.WriteLine("Вы проявили честность. Стражников не вызвали.");
                            Console.WriteLine("Вы продолжаете путь и находите секретный проход.");
                            Console.WriteLine("Конец 2: Вы вышли из подземелья победителем!");
                        }
                        else
                        {
                            Console.WriteLine("Некорректный ввод. Игра завершается.");
                        }
                    }
                    else if (action == "2")
                    {
                        // Прохождение мимо
                        Console.WriteLine("Вы пытаетесь пройти тихо, вас заметили ловушки.");
                        Console.WriteLine("Вы получаете ранение и выбираетесь наружу.");
                        Console.WriteLine("Конец 3: Вы выбрались раненым, но живым.");
                    }
                    else
                    {
                        Console.WriteLine("Некорректный выбор, игра завершена.");
                    }
                }
                else if (path == "2")
                {
                    // Левый коридор
                    Console.WriteLine("Вы пошли по левому коридору и оказались в комнате с загадкой.");
                    Console.WriteLine("Решите загадку: 'Что всегда перед тобой, но ты этого не можешь увидеть?'");
                    Console.WriteLine("1 - Будущее");
                    Console.WriteLine("2 - Темнота");
                    Console.Write("Ваш ответ (1 или 2): ");
                    string riddleAnswer = Console.ReadLine();

                    if (riddleAnswer == "1")
                    {
                        Console.WriteLine("Правильно! Ваша смекалка помогла вам пройти дальше.");
                        Console.WriteLine("Вы нашли скрытый проход и вышли из подземелья победителем!");
                        Console.WriteLine("Конец 4: Вы победитель приключения!");
                    }
                    else if (riddleAnswer == "2")
                    {
                        Console.WriteLine("Неверный ответ. Вы застряли в темноте и заблудились.");
                        Console.WriteLine("Конец 5: Вы потерялись в подземелье навсегда.");
                    }
                    else
                    {
                        Console.WriteLine("Некорректный ввод, игра завершается.");
                    }
                }
                else
                {
                    Console.WriteLine("Некорректный выбор пути, игра завершается.");
                }
            }
            else if (choice == "2")
            {
                Console.WriteLine("Вы вышли из игры. До новых приключений!");
            }
            else
            {
                Console.WriteLine("Пожалуйста, выберите 1 или 2.");
            }

            // Дополнительные ветви для достижения 20 шагов
            // Например, внутри каждой ветки можно добавить новые решения

            // Вывод финала или предложений для повторного запуска
            Console.WriteLine("\nЧто хотите сделать дальше?");
            Console.WriteLine("1 - Начать заново");
            Console.WriteLine("2 - Выйти");
            Console.Write("Введите ваш выбор (1 или 2): ");
            string nextAction = Console.ReadLine();

            if (nextAction == "1")
            {
                restart = true;
            }
            else if (nextAction == "2")
            {
                Console.WriteLine("Спасибо за игру! До свидания.");
                restart = false;
            }
            else
            {
                Console.WriteLine("Некорректный ввод, завершаем игру.");
                restart = false;
            }
        }
    }
}
